@startuml

interface espMode<<physical button>>
interface deviceConfig<<WiFi HTTP>>
interface liveData<<BLE>>
interface api<<WiFi HTTP>>

component bGeigieNano\n {
    interface dataReports<<uart2>>
    component bGeigieController

    component <<subcomponent>>\nESP32Bee\n {
        interface IBL as "bluetoothControl"
        interface IAP as "APIControl"
        interface reporterControl
        interface serverControl
        component Controller
        component Reporter
        component ConfigServer
        component ApiConnector
        component Bluetooth
        component EspConfig

        ''' For ordering '''
        ConfigServer -[hidden]> EspConfig
        ''''''

        Controller -( serverControl
        serverControl - ConfigServer
        dataReports )- Controller
        config )-u- ConfigServer
        config -u- EspConfig
        deviceConfig -d- ConfigServer
        espMode -d- Controller
        Controller -d- reporterControl
        Reporter -r- reporterControl
        IBL )-u- Reporter
        IBL -d- Bluetooth
        IAP )-u- Reporter
        IAP -d- ApiConnector
        ApiConnector -u--( config

        liveData -u- Bluetooth
        api )-u- ApiConnector
    }

    bGeigieController - dataReports

}

@enduml